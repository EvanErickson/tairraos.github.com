<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
	<head profile="http://gmpg.org/xfn/11">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Coding Better Object-Oriented JavaScript with Closure Compiler</title>
		<style>
		h1{font-size:180%;}h2{font-size:155%;}h3{font-size:133%;}h1,h2,h3{margin:1em 0;}h1,h2,h3,h4,h5,h6,strong{font-weight:bold;}abbr,acronym{border-bottom:1px dotted #000;cursor:help;}em{font-style:italic;}blockquote,ul,ol,dl{margin:1em;}ol,ul,dl{margin-left:2em;}ol li{list-style:decimal outside;}ul li{list-style:disc outside;}dl dd{margin-left:1em;}th,td{border:1px solid #000;padding:.5em;}th{font-weight:bold;text-align:center;}caption{margin-bottom:.5em;text-align:center;}p,fieldset,table,pre{margin-bottom:1em;}input[type=text],input[type=password],textarea{width:12.25em;*width:11.9em;}
		.body{overflow:hidden;_overflow:visible;_zoom:1}.page{margin:0 auto;width:950px}.gs960{width:960px}.main{overflow:hidden;_overflow:visible;_zoom:1}.leftCol{float:left;width:250px;_margin-right:-3px}.rightCol{float:right;width:300px;_margin-left:-3px}
		.hl-default{color:black}.hl-code{color:gray}.hl-brackets{color:olive}.hl-comment{color:orange}.hl-quotes{color:darkred}.hl-string{color:red}.hl-identifier{color:blue}.hl-builtin{color:teal}.hl-reserved{color:green}.hl-inlinedoc{color:blue}.hl-var{color:darkblue}.hl-url{color:blue}.hl-special{color:navy}.hl-number{color:maroon}.hl-inlinetags{color:blue}.hl-main{background-color:lightgrey}.hl-gutter{background-color:#999;color:White}.hl-table{font-family:courier;font-size:12px;border:solid 1px Lightgrey}code,pre,var{font-size:93%;font-weight:normal;line-height:138%;background:#f8f8f8;font-family:"Bitstream Vera Sans Mono","Lucida Console",Consolas,Monaco,"courier new",courier}
		body {font-size: 93%;}
		h1,h2,h3,h4,h5,h6,strong,a{color: #1a4d76;}
		a:visited {color: #2d6696;}
		a:hover, .posthead a:hover, .bioblurb a:hover {color: #d57e21;}
		dt {font-weight: bold;}
		blockquote{border-left:8px solid #eee; margin-left:2em; padding-left:1em}
		code, pre, var {border:1px solid #eee;padding:2px}
		.posthead {background:none repeat scroll 0 0 #F8F8F8;border-bottom:1px solid #ddd;border-top:3px solid #eee;color:#444;padding:10px;}
		.posthead h2 {margin: 0}
		.posthead h2 a {color:#1A4D76; font-size:111%;font-weight:normal;text-decoration:none;}
		.entry {margin: 10px 10px 20px; line-height: 140%; }
		.post {border-bottom: 1px solid #eee;}
		.archimage {width: 70px; border: 1px solid #ccc; padding: 1px}
		.alignleft{float:left;}
		</style>
	</head>
	<body>
		<div class="posthead line">
			<h2>用 Closure Compiler 编写更好的 OO 的 JavaScript</h2>
			<br>
			原文链接：<a href="http://calendar.perfplanet.com/2010/coding-better-object-oriented-javascript-with-closure-compiler/">http://calendar.perfplanet.com/2010/coding-better-object-oriented-javascript-with-closure-compiler/</a>
			<br>
			原文作者：<a href="http://hedgerwow.blogspot.com/">Hedger Wang</a>
			<br>
			译文作者：<a href="http://www.cnblogs.com/georgewing/archive/2010/12/15/1902902.html">George Wang</a>
		</div>

		<div class="entry unit">
			<h3>前面的话</h3>
			<p>
				许多程序员觉得OO 的 JavaScript 是种不错的方法，但也明白由于语言自身的本质和它所运行的环境(主要是在 web 浏览器中)，编写 OO 风格的 JavaScript 是比较痛苦的。
			</p>
			<p>
				使用 <a target="_blank" href="http://code.google.com/closure/compiler/">Google Closure Compiler</a> 不仅可以压缩代码，而且可以像别的编译器那样编译代码！
			</p>
			<p>
				当编译器的标帜“<a target="_blank" href="http://code.google.com/closure/compiler/docs/api-tutorial3.html">ADVANCED_OPTIMIZATIONS</a>(高级选项)” 被贴签时，与大多的 JavaScript 压缩工具如 <a target="_blank" href="http://developer.yahoo.com/yui/compressor/">YUI Compressor</a>、<a target="_blank" href="http://o.dojotoolkit.org/docs/shrinksafe">Dojo Compressor</a> 相比，它拥有更多的优化。
			</p>
			<p>
				我会讲几种通用的 OO 风格的模式，以及是怎样实现的。
			</p>
			<p>
				通过这篇文章，你将学会使用 Closure Compiler 来编写具有 OO 风格的JS代码。
			</p>
			<h3>OO 风格的 JavaScript 决不简易</h3>
			<p>
				长期以来，由于 JavaScript 的本质与浏览器这个宿主环境，造成了普通认为：编写纯 OO 的 JavaScript 应用太难了。<a target="_blank" href="http://jonraasch.com/blog/10-javascript-performance-boosting-tips-from-nicholas-zakas">Nicholas Zakas</a> 是最有名的<a target="_blank" href="http://www.nicholaszakas.com/2008/02/18/don-t-give-up/">黑腰带级空手道</a> JavaScript 程序员之一，曾在 blog 的贴文中写过 OO 风格的 JS 代码所带来的痛苦：
			</p>
			<blockquote>
				在传统的OO语言中，类、继承是信手拈来。它们的编译器理解其中的工作原理，所以不会因为加几个类或多几个继承而在执行时受任何的影响。而在 JavaScript 中，引用类型、继承是2大要命的伤痛处。
			</blockquote>
			<h3>JavaScript 没有类</h3>
			<p>
				虽然 OO 风格的JS 在运行时有执行性能上的缺陷，人们还是在尝试着用各种不同的OO风格的JS，以换掉函数化的JS。
			</p>
			<p>
				<a target="_blank" href="http://ejohn.org/">John Resig</a>用了一种<a target="_blank" href="http://ejohn.org/apps/learn/#36">有趣的方式</a>以确保在“类”函数作为构造函数时用不用 new 关键字都无所谓。
			</p>
			<div class="hl-main">
				<pre><span class="hl-comment">//</span><span class="hl-comment"> John Resig's Approach.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-identifier">name</span><span class="hl-brackets">)</span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-code"> !</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code"> </span><span class="hl-reserved">instanceof</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">
    </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-identifier">name</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">name</span><span class="hl-code"> = </span><span class="hl-identifier">name</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">userA</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">John</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> An instance.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">userB</span><span class="hl-code"> = </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">Jane</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> Also an instance.</span><span class="hl-comment"></span></pre>
			</div>
			<h3>JavaScript没有访问控制</h3>
			<p>
				<a target="_blank" href="http://www.crockford.com/">Douglas Crockford</a>(老道)提出了一种<a target="_blank" href="http://www.crockford.com/javascript/private.html">模块模式</a>(module pattern)来说明如何来保护与对象的外部进行读或写的私有成员。
			</p>
			<div class="hl-main">
				<pre><span class="hl-comment">//</span><span class="hl-comment"> Crockford's approach.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-identifier">name</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">_name</span><span class="hl-code"> = </span><span class="hl-identifier">name</span><span class="hl-code">;
 
  </span><span class="hl-comment">//</span><span class="hl-comment"> Getter for the private name.</span><span class="hl-comment"></span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getName</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">_name</span><span class="hl-code">;
  </span><span class="hl-brackets">}</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre>
			</div>
			<h3>全局变量是糟粕，过深命名空间(deeply name-spaced)的变量也垃圾得很</h3>
			<p>
				<a target="_blank" href="http://javascript.crockford.com/style2.html">全局变量是魔鬼</a>，而用过深命名空间的变量也<a target="_blank" href="http://james.padolsey.com/javascript/zakas-javascript-performance-tips/">超慢</a>。
			</p>
			<div class="hl-main">
				<pre><span class="hl-comment">//</span><span class="hl-comment"> Global is evil.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">myProjectDemoUserName</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">foo</span><span class="hl-quotes">'</span><span class="hl-code">;
</span><span class="hl-comment">//</span><span class="hl-comment"> Meeh...</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-identifier">my</span><span class="hl-code">.</span><span class="hl-identifier">project</span><span class="hl-code">.</span><span class="hl-identifier">demo</span><span class="hl-code">.</span><span class="hl-identifier">user</span><span class="hl-code">.</span><span class="hl-identifier">Name</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">foo</span><span class="hl-quotes">'</span><span class="hl-code">;</span></pre>
			</div>
			<h3>开发人员不要弄得冗余</h3>
			<p>
				在文档中加载了<a target="_blank" href="http://yui.yahooapis.com/2.8.2r1/build/dom/dom-min.js">整个 YUI DOM 库</a>，却只用到了其中的一个静态方法 <var> YAHOO.util.Dom.getStyle(document.body, ‘backgroundColor’) </var>
				时怎样呢？
			</p>
			<h3>简化不是简单</h3>
			<p>
				也可以在写 <a target="_blank" href="http://jquery.com/">jQuery 库</a>的插件，但很快就会发现，不能去处理 DOM 范围、选择器模式，也没有数据集合、组件框架、类式继承，没有任何构建复杂 Web 应用开发所需要的东东。
			</p>
			<h3>只有 JavaScript 忍者能活吗？</h3>
			<p>
				所以，我们只好去<a target="_blank" href="http://jobs.jsninja.com/">招聘</a>那些请不动的 JavaScript 忍者或是成为其中<a target="_blank" href="http://dmitry.baranovskiy.com/post/91403200">之一</a>。
			</p>
			<p>
				那么，JavaScript 代码非得写得这样吗：
			</p>
			<div class="hl-main">
				<pre><span class="hl-code">  </span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">a</span><span class="hl-quotes">"</span><span class="hl-code"> </span><span class="hl-reserved">in</span><span class="hl-code"> </span><span class="hl-builtin">window</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-number">1</span><span class="hl-code">;
  </span><span class="hl-brackets">}</span><span class="hl-code">
  </span><span class="hl-identifier">alert</span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				其实这是 JavaScript 的糟粕，代码不能写成这种鬼样。比如说 C++、Java 程序员就不会这样来编写代码。程序员的重心应该是在算法和数据结构，而不是这些旁门左道的技巧。
			</p>
			<h3>我们能有所有的精华吗</h3>
			<p>
				看来几乎不像是在编写轻量的、通用的、强壮的 JavaScript 来提供功能丰富的、可维护的能力，并且用在很多地方。
			</p>
			<p>
				想要让 JavaScript 不再是玩具语言吗？
			</p>
			<p>
				那就使用 Closure Compiler 吧。
			</p>
			<h3>让 Closure Compiler 使你变身为 JavaScript 武将</h3>
			<blockquote>
				<a target="_blank" href="http://code.google.com/closure/compiler/">Closure Compiler</a> 是可以使 JavaScript 下载、运行更快的工具。它是真正的 JavaScript 编译器。将源代码编译为机器代码的替换，将 JavaScript 编译为更优的 JavaScript。会解析并分析你的 JavaScript，移除死代码、重写并最小化。也可以检查语法、变量引用、类型，并警告 JavaScript 常见的相关陷阱。
			</blockquote>
			<p>
				在<a target="_blank" href="http://code.google.com/closure/compiler/">官网</a>上已经有了很多不错的资源来告诉你如何使用编译器。写这篇文章，其实是为了写<a target="_blank" href="http://books.google.com/books?id=p7uyWPcVGZsC&amp;printsec=frontcover&amp;dq=closure+the+definitive+guide&amp;hl=en&amp;ei=tz33TObSFoKCsQPP_d2eAg&amp;sa=X&amp;oi=book_result&amp;ct=book-thumbnail&amp;resnum=1&amp;ved=0CCgQ6wEwAA#v=onepage&amp;q&amp;f=false">一本书中的某章节</a>。让我们先来解决之前说到的问题。
			</p>
			<h3>用 @constructor 来标注函数作为类</h3>
			<p>
				想要在运行时会检查构造函数，可以使用编译器来为你服务。而且不用在运行时去检查，要记住的这个核心理念是：在编译器完成时就可以了。
			</p>
			<div class="hl-main">
				<pre><span class="hl-comment">/*</span><span class="hl-comment">*
 * @constructor
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">MyClass</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
 
 
</span><span class="hl-comment">//</span><span class="hl-comment"> Pass.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">obj1</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">MyClass</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment"> ERROR: Constructor function (this:MyClass):</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-comment">//</span><span class="hl-comment"> class should be called with the "new" keyword.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">obj2</span><span class="hl-code"> = </span><span class="hl-identifier">MyClass</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">; </span><span class="hl-comment">//</span><span class="hl-comment"> Error.</span><span class="hl-comment"></span></pre>
			</div>
			<h3>用 @private 进行访问控制</h3>
			<div class="hl-main">
				<pre><span class="hl-comment">//</span><span class="hl-comment"> File demo1.js //</span><span class="hl-comment"></span><span class="hl-code">
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * A User.
 * @constructor
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
 
  </span><span class="hl-comment">/*</span><span class="hl-comment">*
   * The creation date.
   * @private
   * @type {Date}
   </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_birthDay</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-builtin">Date</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * @return {number} The creation year.
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">User</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">getBirthYear</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">_birthDay</span><span class="hl-code">.</span><span class="hl-identifier">getYear</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment"> File demo2.js //</span><span class="hl-comment"></span><span class="hl-code">
 
</span><span class="hl-comment">//</span><span class="hl-comment"> Create a user.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">me</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment"> Print out its birth year.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">me</span><span class="hl-code">.</span><span class="hl-identifier">getBirthYear</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				编译器会确保私有成员
				<var> _birthDay </var>
				在整个应用程序的外部不会读或写。只在相同的标为
				<var> @private </var>
				的 JS 代码中才可以访问到对象。当然，也可以用
				<var> @protected </var>
				在代码里标注。
			</p>
			<h3>用 @extend 来管理类继承</h3>
			<p>
				假设我们有3个类：<var> Shape </var>、<var> Box </var>、<var> Cube </var>。
			</p>
			<p>
				<var> Shape </var>
				类定义了一个通用的方法：
				<var> getSize() <var> 。 </var> </var>
			</p>
			<p>
				<var> Box </var>
				类继承
				<var> Shape </var>
				类。
			</p>
			<p>
				<var> Cube </var>
				类继承
				<var> Box </var>
				类
			</p>
			<div class="hl-main">
				<pre><span class="hl-comment">/*</span><span class="hl-comment">*
 * Helper function that implements (pseudo)Classical inheritance inheritance.
 * @see </span><span class="hl-url">http://www.yuiblog.com/blog/2010/01/06/inheritance-patterns-in-yui-3/</span><span class="hl-comment">
 * @param {Function} childClass
 * @param {Function} parentClass
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">inherits</span><span class="hl-brackets">(</span><span class="hl-identifier">childClass</span><span class="hl-code">, </span><span class="hl-identifier">parentClass</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-comment">/*</span><span class="hl-comment">* @constructor </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">tempClass</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-brackets">}</span><span class="hl-code">;
  </span><span class="hl-identifier">tempClass</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code"> = </span><span class="hl-identifier">parentClass</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">;
  </span><span class="hl-identifier">childClass</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">tempClass</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-identifier">childClass</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">constructor</span><span class="hl-code"> = </span><span class="hl-identifier">childClass</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-comment">//</span><span class="hl-comment">////////////////////////////////////////////////////////////////////////////</span><span class="hl-comment"></span><span class="hl-code">
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * The shape
 * @constructor
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">Shape</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-comment">//</span><span class="hl-comment"> No implementation.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * Get the size
 * @return {number} The size.
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Shape</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">getSize</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-comment">//</span><span class="hl-comment"> No implementation.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment">////////////////////////////////////////////////////////////////////////////</span><span class="hl-comment"></span><span class="hl-code">
 
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * The Box.
 * @param {number} width The width.
 * @param {number} height The height.
 * @constructor
 * @extends {Shape}
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">Box</span><span class="hl-brackets">(</span><span class="hl-identifier">width</span><span class="hl-code">, </span><span class="hl-identifier">height</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-identifier">Shape</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;
 
  </span><span class="hl-comment">/*</span><span class="hl-comment">*
   * @private
   * @type {number}
   </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">width_</span><span class="hl-code"> = </span><span class="hl-identifier">width</span><span class="hl-code">;
 
  </span><span class="hl-comment">/*</span><span class="hl-comment">*
   * @private
   * @type {number}
   </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">height_</span><span class="hl-code"> = </span><span class="hl-identifier">height</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-identifier">inherits</span><span class="hl-brackets">(</span><span class="hl-identifier">Box</span><span class="hl-code">, </span><span class="hl-identifier">Shape</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * @return {number} The width.
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Box</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">getWidth</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">width_</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * @return {number} The height.
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Box</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">getHeight</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">height_</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
 
</span><span class="hl-comment">/*</span><span class="hl-comment">* @inheritDoc </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Box</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">getSize</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">height_</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">width_</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment">//////////////////////////////////////////////////////////////////////////</span><span class="hl-comment"></span><span class="hl-code">
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * The Box.
 * @param {number} width The width.
 * @param {number} height The height.
 * @param {number} depth The depth.
 * @constructor
 * @extends {Box}
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">Cube</span><span class="hl-brackets">(</span><span class="hl-identifier">width</span><span class="hl-code">, </span><span class="hl-identifier">height</span><span class="hl-code">, </span><span class="hl-identifier">depth</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-identifier">Box</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-identifier">width</span><span class="hl-code">, </span><span class="hl-identifier">height</span><span class="hl-brackets">)</span><span class="hl-code">;
 
  </span><span class="hl-comment">/*</span><span class="hl-comment">*
   * @private
   * @type {number}
   </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">depth_</span><span class="hl-code"> = </span><span class="hl-identifier">depth</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-identifier">inherits</span><span class="hl-brackets">(</span><span class="hl-identifier">Cube</span><span class="hl-code">, </span><span class="hl-identifier">Box</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * @return {number} The width.
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Cube</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">getDepth</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">depth_</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
 
</span><span class="hl-comment">/*</span><span class="hl-comment">* @inheritDoc </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Cube</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">getSize</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">depth_</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getHeight</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getWidth</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment">//////////////////////////////////////////////////////////////////////////</span><span class="hl-comment"></span><span class="hl-code">
 
 
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">cube</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">Cube</span><span class="hl-brackets">(</span><span class="hl-number">3</span><span class="hl-code">, </span><span class="hl-number">6</span><span class="hl-code">, </span><span class="hl-number">9</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">cube</span><span class="hl-code">.</span><span class="hl-identifier">getSize</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				上面的 JavaScript 代码有些长，但是源代码的大小会被简单的看作是输入的字符数。
			</p>
			<p>
				那些文档中描述编码的注释、变量的名称、方法的名称会被编译器重新命名或移除掉。
			</p>
			<p>
				3层级的类继承树会被看作是简单的函数，编译器会进行优化。
			</p>
			<p>
				下面是编译后的代码：
			</p>
			<div class="hl-main">
				<pre><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-brackets">}</span><span class="hl-code">
  </span><span class="hl-identifier">c</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code"> = </span><span class="hl-identifier">b</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">;
  </span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-identifier">e</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">f</span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">c</span><span class="hl-code"> = </span><span class="hl-identifier">a</span><span class="hl-code">;
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-code"> = </span><span class="hl-identifier">b</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-identifier">d</span><span class="hl-brackets">(</span><span class="hl-identifier">f</span><span class="hl-code">, </span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-identifier">f</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">c</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">g</span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span class="hl-identifier">c</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-identifier">f</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">d</span><span class="hl-code"> = </span><span class="hl-identifier">c</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-identifier">d</span><span class="hl-brackets">(</span><span class="hl-identifier">g</span><span class="hl-code">, </span><span class="hl-identifier">f</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-identifier">g</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">d</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">c</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-brackets">(</span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">g</span><span class="hl-brackets">(</span><span class="hl-number">3</span><span class="hl-code">, </span><span class="hl-number">6</span><span class="hl-code">, </span><span class="hl-number">9</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				虽然所有的变量和方法都改名了，但是你也注意到：有些方法被移除掉，有些方法合成了一行内。比如：
			</p>
			<div class="hl-main">
				<pre><span class="hl-identifier">Cube</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">getSize</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">depth_</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getHeight</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">getWidth</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				变成了：
			</p>
			<div class="hl-main">
				<pre><span class="hl-identifier">g</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">d</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">c</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				显然，2个 getter 方法
				<var> getWidth() </var>
				、
				<var> getHeight() </var>
				被
				<var> this._width </var>
				和
				<var> this._height </var>
				安全的替换掉。因此，那些 getter 已经没有用，并且被编译器移除掉了。
			</p>
			<p>
				同时使用了
				<var> @private </var>
				和 getter 的方法是指私有属性
				<var> _width </var>
				对开发人员来说是只读的，无妨对其添加一个 getter 方法。
			</p>
			<h3>使用 @interface 和 @implements</h3>
			<p>
				我们对编写 OO 风格的 JavaScript 感兴趣了后，将上面的示例改成下面的代码。
			</p>
			<div class="hl-main">
				<pre><span class="hl-comment">//</span><span class="hl-comment"> skip example code.</span><span class="hl-comment"></span><span class="hl-code">
 
</span><span class="hl-comment">//</span><span class="hl-comment">//////////////////////////////////////////////////////////////////////////</span><span class="hl-comment"></span><span class="hl-code">
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * The shape
 * @interface
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">Shape</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * Get the size
 * @return {number} The size.
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Shape</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">getSize</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment">//////////////////////////////////////////////////////////////////////////</span><span class="hl-comment"></span><span class="hl-code">
 
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * The Box.
 * @param {number} width The width.
 * @param {number} height The height.
 * @constructor
 * @implements {Shape}
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">Box</span><span class="hl-brackets">(</span><span class="hl-identifier">width</span><span class="hl-code">, </span><span class="hl-identifier">height</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-identifier">Shape</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-brackets">)</span><span class="hl-code">;
 
  </span><span class="hl-comment">/*</span><span class="hl-comment">*
   * @private
   * @type {number}
   </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">width_</span><span class="hl-code"> = </span><span class="hl-identifier">width</span><span class="hl-code">;
 
  </span><span class="hl-comment">/*</span><span class="hl-comment">*
   * @private
   * @type {number}
   </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">height_</span><span class="hl-code"> = </span><span class="hl-identifier">height</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * @return {number} The width.
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Box</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">getWidth</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">width_</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment"> skip example code.</span><span class="hl-comment"></span></pre>
			</div>
			<p>
				由于 @interface 只用在编译的时候，经过编译后的代码更小了，并且不会输出包含接口的代码。
			</p>
			<div class="hl-main">
				<pre><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">c</span><span class="hl-code"> = </span><span class="hl-identifier">a</span><span class="hl-code">;
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-code"> = </span><span class="hl-identifier">b</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-identifier">d</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">c</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span class="hl-identifier">c</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-identifier">d</span><span class="hl-code">.</span><span class="hl-identifier">call</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">, </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">d</span><span class="hl-code"> = </span><span class="hl-identifier">c</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">(</span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-brackets">}</span><span class="hl-code">
  </span><span class="hl-identifier">c</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code"> = </span><span class="hl-identifier">b</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">;
  </span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-brackets">)</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-code">, </span><span class="hl-identifier">d</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-identifier">e</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">d</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-code"> * </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">c</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-brackets">(</span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">e</span><span class="hl-brackets">(</span><span class="hl-number">3</span><span class="hl-code">, </span><span class="hl-number">6</span><span class="hl-code">, </span><span class="hl-number">9</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<h3>使用包(命名空间的 JS 对象)</h3>
			<p>
				想要对 JS 对象使用命名空间的话，命名层级过深的问题不会影响运行时的性能，因为编译器会帮你解决掉。
			</p>
			<div class="hl-main">
				<pre><span class="hl-comment">//</span><span class="hl-comment"> Create namespaces.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">demo</span><span class="hl-code"> = </span><span class="hl-brackets">{</span><span class="hl-brackets">}</span><span class="hl-code">;
</span><span class="hl-identifier">demo</span><span class="hl-code">.</span><span class="hl-identifier">example</span><span class="hl-code"> = </span><span class="hl-brackets">{</span><span class="hl-brackets">}</span><span class="hl-code">;
</span><span class="hl-identifier">demo</span><span class="hl-code">.</span><span class="hl-identifier">example</span><span class="hl-code">.</span><span class="hl-identifier">exercise</span><span class="hl-code"> = </span><span class="hl-brackets">{</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * @constructor
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">demo</span><span class="hl-code">.</span><span class="hl-identifier">example</span><span class="hl-code">.</span><span class="hl-identifier">exercise</span><span class="hl-code">.</span><span class="hl-identifier">Foo</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-identifier">demo</span><span class="hl-code">.</span><span class="hl-identifier">example</span><span class="hl-code">.</span><span class="hl-identifier">exercise</span><span class="hl-code">.</span><span class="hl-identifier">Foo</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">value1</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-identifier">demo</span><span class="hl-code">.</span><span class="hl-identifier">example</span><span class="hl-code">.</span><span class="hl-identifier">exercise</span><span class="hl-code">.</span><span class="hl-identifier">Foo</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">value2</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * Static method
 * @param {string} str String to print.
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">demo</span><span class="hl-code">.</span><span class="hl-identifier">example</span><span class="hl-code">.</span><span class="hl-identifier">exercise</span><span class="hl-code">.</span><span class="hl-identifier">Foo</span><span class="hl-code">.</span><span class="hl-identifier">print</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">str</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">str</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * @type {string}
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">demo</span><span class="hl-code">.</span><span class="hl-identifier">example</span><span class="hl-code">.</span><span class="hl-identifier">exercise</span><span class="hl-code">.</span><span class="hl-identifier">Foo</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">value1</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">abc</span><span class="hl-quotes">'</span><span class="hl-code">;
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * @type {string}
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">demo</span><span class="hl-code">.</span><span class="hl-identifier">example</span><span class="hl-code">.</span><span class="hl-identifier">exercise</span><span class="hl-code">.</span><span class="hl-identifier">Foo</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">value2</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-string">def</span><span class="hl-quotes">'</span><span class="hl-code">;
 
 
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">foo</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">demo</span><span class="hl-code">.</span><span class="hl-identifier">example</span><span class="hl-code">.</span><span class="hl-identifier">exercise</span><span class="hl-code">.</span><span class="hl-identifier">Foo</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				编译后的代码：
			</p>
			<div class="hl-main">
				<pre><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">abc</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">def</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				也许，想要保留 JS 代码而避免与页面中其他脚本产生冲突的话，可以使用标帜 <a target="_blank" href="http://code.google.com/p/closure-compiler/wiki/FAQ">-output_wrapper</a>，也不是全局的对象(除非是明确的<a target="_blank" href="http://code.google.com/closure/compiler/docs/api-tutorial3.html#no">导出</a>)。
			</p>
			<p>
				编译后的代码如下：
			</p>
			<div class="hl-main">
				<pre><span class="hl-brackets">(</span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">abc</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">def</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">;</span><span class="hl-brackets">}</span><span class="hl-brackets">)</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span></pre>
			</div>
			<p>
				编译器会确保那些长的命名空间、属性、方法已经重命名，尽可能多的短名称。
			</p>
			<h3>进行类型检查是在构建时，而非运行时</h3>
			<p>
				在构建时进行类型检查可以减少不必要的在运行时进行的类型检查。比如：
			</p>
			<div class="hl-main">
				<pre><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">UsersGroup</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">users_</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-identifier">UsersGroup</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">add</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">user</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-comment">//</span><span class="hl-comment"> Make sure that only user can be added.</span><span class="hl-comment"></span><span class="hl-code">
  </span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-brackets">(</span><span class="hl-identifier">user</span><span class="hl-code"> </span><span class="hl-reserved">instanceof</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-reserved">throw</span><span class="hl-code"> </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">Error</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">Only user can be added.</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-brackets">}</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">users_</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">(</span><span class="hl-identifier">user</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">me</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">myGroup</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">UsersGroup</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-identifier">myGroup</span><span class="hl-code">.</span><span class="hl-identifier">add</span><span class="hl-brackets">(</span><span class="hl-identifier">me</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				这种方法可以完成。
			</p>
			<div class="hl-main">
				<pre><span class="hl-comment">/*</span><span class="hl-comment">*
 * @constructor
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * @constructor
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">UsersGroup</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-comment">/*</span><span class="hl-comment">*
   * @private
   * @type {Array.&amp;lt;User&amp;gt;}
   </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">users_</span><span class="hl-code"> = </span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
* @param {User} user
</span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">UsersGroup</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">add</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">user</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">users_</span><span class="hl-code">.</span><span class="hl-identifier">push</span><span class="hl-brackets">(</span><span class="hl-identifier">user</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				注意
				<var> this.users_ </var>
				的数据类型为
				<var> @type {Array.&lt;user&gt;} </var>
				表示是 User 的一个列表。
			</p>
			<p>
				应该使用有意义的数据结构，而不是视任何事物为原生的对象，否则非常容易出错。
			</p>
			<h3>使用 @enum</h3>
			<p>
				有些时候你想要处理多种情形：
			</p>
			<div class="hl-main">
				<pre><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">Project</span><span class="hl-brackets">(</span><span class="hl-identifier">status</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">status_</span><span class="hl-code"> = </span><span class="hl-identifier">status</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-identifier">Project</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">isBusy</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">switch</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">status_</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-reserved">case</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">busy</span><span class="hl-quotes">'</span><span class="hl-code">:;
    </span><span class="hl-reserved">case</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">super_busy</span><span class="hl-quotes">'</span><span class="hl-code">:
      </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">true</span><span class="hl-code">;
    </span><span class="hl-reserved">default</span><span class="hl-code">:
      </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">false</span><span class="hl-code">;
  </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">p1</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">Project</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">busy</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">p2</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">Project</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">super_busy</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">p3</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">Project</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">idle</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">p1</span><span class="hl-code">.</span><span class="hl-identifier">isBusy</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">p2</span><span class="hl-code">.</span><span class="hl-identifier">isBusy</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">p3</span><span class="hl-code">.</span><span class="hl-identifier">isBusy</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				可以考虑使用
				<var> @enum </var>
				：
			</p>
			<div class="hl-main">
				<pre><span class="hl-comment">/*</span><span class="hl-comment">*
 * @constructor
 * @param {Project.Status} status
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">Project</span><span class="hl-brackets">(</span><span class="hl-identifier">status</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-comment">/*</span><span class="hl-comment">*
   * @type {Project.Status}
   * @private
   </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">status_</span><span class="hl-code"> = </span><span class="hl-identifier">status</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * @enum {number}
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Project</span><span class="hl-code">.</span><span class="hl-identifier">Status</span><span class="hl-code"> = </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-identifier">BUSY</span><span class="hl-code">: </span><span class="hl-number">0</span><span class="hl-code">,
  </span><span class="hl-identifier">SUPER_BUSY</span><span class="hl-code">: </span><span class="hl-number">1</span><span class="hl-code">,
  </span><span class="hl-identifier">IDLE</span><span class="hl-code">: </span><span class="hl-number">2</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * @return {boolean}
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Project</span><span class="hl-code">.</span><span class="hl-identifier">prototype</span><span class="hl-code">.</span><span class="hl-identifier">isBusy</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">switch</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">status_</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-reserved">case</span><span class="hl-code"> </span><span class="hl-identifier">Project</span><span class="hl-code">.</span><span class="hl-identifier">Status</span><span class="hl-code">.</span><span class="hl-identifier">BUSY</span><span class="hl-code">:;
    </span><span class="hl-reserved">case</span><span class="hl-code"> </span><span class="hl-identifier">Project</span><span class="hl-code">.</span><span class="hl-identifier">Status</span><span class="hl-code">.</span><span class="hl-identifier">SUPER_BUSY</span><span class="hl-code">:
      </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">true</span><span class="hl-code">;
    </span><span class="hl-reserved">default</span><span class="hl-code">:
      </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">false</span><span class="hl-code">;
  </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
 
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">p1</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">Project</span><span class="hl-brackets">(</span><span class="hl-identifier">Project</span><span class="hl-code">.</span><span class="hl-identifier">Status</span><span class="hl-code">.</span><span class="hl-identifier">BUSY</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">p2</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">Project</span><span class="hl-brackets">(</span><span class="hl-identifier">Project</span><span class="hl-code">.</span><span class="hl-identifier">Status</span><span class="hl-code">.</span><span class="hl-identifier">SUPER_BUSY</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">p3</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">Project</span><span class="hl-brackets">(</span><span class="hl-identifier">Project</span><span class="hl-code">.</span><span class="hl-identifier">Status</span><span class="hl-code">.</span><span class="hl-identifier">IDLE</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">p1</span><span class="hl-code">.</span><span class="hl-identifier">isBusy</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">p2</span><span class="hl-code">.</span><span class="hl-identifier">isBusy</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">p3</span><span class="hl-code">.</span><span class="hl-identifier">isBusy</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				编译后为：
			</p>
			<div class="hl-main">
				<pre><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-brackets">(</span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-identifier">b</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-brackets">(</span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">switch</span><span class="hl-brackets">(</span><span class="hl-identifier">b</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-reserved">case</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">:
    ;
    </span><span class="hl-reserved">case</span><span class="hl-code"> </span><span class="hl-number">1</span><span class="hl-code">:
      </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">true</span><span class="hl-code">;
    </span><span class="hl-reserved">default</span><span class="hl-code">:
      </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">false</span><span class="hl-code">
  </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">d</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-identifier">e</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-brackets">(</span><span class="hl-number">2</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">c</span><span class="hl-brackets">(</span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-brackets">(</span><span class="hl-number">0</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">c</span><span class="hl-brackets">(</span><span class="hl-identifier">d</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">c</span><span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">toString</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				枚举变量被原始的数替换。使用枚举能够编写更多的可维护性的代码。
			</p>
			<h3>使用 @define 启用或禁用消息的记录</h3>
			<p>
				如果你想要在一个类中记录某些重要的消息的话，像每一位谨慎的程序员那样都可以做到。
			</p>
			<div class="hl-main">
				<pre><span class="hl-comment">/*</span><span class="hl-comment">*
 * namespace for the Logger.
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">Logger</span><span class="hl-code"> = </span><span class="hl-brackets">{</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * Whether logging should be enabled.
 * @define {boolean}
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Logger</span><span class="hl-code">.</span><span class="hl-identifier">ENABLED</span><span class="hl-code"> = </span><span class="hl-reserved">true</span><span class="hl-code">;
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * the log API.
 * @param {...*} args
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">Logger</span><span class="hl-code">.</span><span class="hl-identifier">log</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">args</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">Logger</span><span class="hl-code">.</span><span class="hl-identifier">ENABLED</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-comment">//</span><span class="hl-comment"> Don't do anything if logger is disabled.</span><span class="hl-comment"></span><span class="hl-code">
    </span><span class="hl-reserved">return</span><span class="hl-code">;
  </span><span class="hl-brackets">}</span><span class="hl-code">
  </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">console</span><span class="hl-code"> = </span><span class="hl-builtin">window</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">console</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-code">;
  </span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-identifier">console</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-identifier">console</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">log</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-code">.</span><span class="hl-identifier">apply</span><span class="hl-brackets">(</span><span class="hl-identifier">console</span><span class="hl-code">, </span><span class="hl-identifier">arguments</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * A User.
 * @param {string} name
 * @constructor
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-identifier">name</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-identifier">Logger</span><span class="hl-code">.</span><span class="hl-identifier">log</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">New User</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-identifier">name</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">me</span><span class="hl-code"> = </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">me</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				代码会编译为：
			</p>
			<div class="hl-main">
				<pre><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-builtin">window</span><span class="hl-code">.</span><span class="hl-identifier">console</span><span class="hl-code">;
  </span><span class="hl-identifier">a</span><span class="hl-code"> &amp;&amp; </span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">log</span><span class="hl-code">.</span><span class="hl-identifier">apply</span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">arguments</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-identifier">b</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">New User</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-identifier">a</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">me</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				你可以添加标帜
				<var> &ndash;define Logger.ENABLED=false </var>
				来禁用记录器。也可以添加标帜
				<var> &ndash;jscomp_error unknownDefines </var>
				来捕获未知的
				<var> @define </var>
				。
			</p>
			<pre>java -jar compiler.jar \
  --js src/demo.js \
  --js_output_file compiled/demo.js \
  --warning_level VERBOSE \
  --formatting PRETTY_PRINT \
  --jscomp_error accessControls \
  --jscomp_error checkTypes \
  --jscomp_error unknownDefines
  --define Logger.ENABLED=false
  --compilation_level ADVANCED_OPTIMIZATIONS;
</pre>
			<p>
				对开发人员来说，允许在生成代码时启用记录器，或是完全由编译器带所有的记录器调用到生产布署。
			</p>
			<h3>使用类型转换</h3>
			<p>
				有些时候你想要把 JSON 对象转换为未知的引用类型。比如：
			</p>
			<div class="hl-main">
				<pre><span class="hl-comment">/*</span><span class="hl-comment">*
 * The Model definition.
 * @constructor
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">UserModel</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-comment">/*</span><span class="hl-comment">*
   * @type {string}
   </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">firstName</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-quotes">'</span><span class="hl-code">;
 
  </span><span class="hl-comment">/*</span><span class="hl-comment">*
   * @type {string}
   </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">lastName</span><span class="hl-code"> = </span><span class="hl-quotes">'</span><span class="hl-quotes">'</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-comment">//</span><span class="hl-comment">///////////////////////////////////////////////////////////////////////////</span><span class="hl-comment"></span><span class="hl-code">
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * The User constructor.
 * @constructor
 * @param {string} firstName
 * @param {string} lastName
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-reserved">function</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-identifier">firstName</span><span class="hl-code">, </span><span class="hl-identifier">lastName</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-comment">/*</span><span class="hl-comment">*
   * @type {string}
   </span><span class="hl-comment">*/</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">fullName</span><span class="hl-code"> = </span><span class="hl-identifier">firstName</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string"> </span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-identifier">lastName</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
 
</span><span class="hl-comment">/*</span><span class="hl-comment">*
 * A static method that creates a User from a model.
 * @param {UserModel} model
 * @return {User} The user created.
 </span><span class="hl-comment">*/</span><span class="hl-code">
</span><span class="hl-identifier">User</span><span class="hl-code">.</span><span class="hl-identifier">createFromUserModel</span><span class="hl-code"> = </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">model</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-identifier">User</span><span class="hl-brackets">(</span><span class="hl-identifier">model</span><span class="hl-code">.</span><span class="hl-identifier">firstName</span><span class="hl-code">, </span><span class="hl-identifier">model</span><span class="hl-code">.</span><span class="hl-identifier">lastName</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">;
 
</span><span class="hl-comment">//</span><span class="hl-comment">///////////////////////////////////////////////////////////////////////////</span><span class="hl-comment"></span><span class="hl-code">
 
</span><span class="hl-comment">//</span><span class="hl-comment"> Cast a simple JSON Object as {UserModel}.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">data</span><span class="hl-code"> = </span><span class="hl-comment">/*</span><span class="hl-comment">* @type {UserModel} </span><span class="hl-comment">*/</span><span class="hl-brackets">(</span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-identifier">firstName</span><span class="hl-code"> : </span><span class="hl-quotes">'</span><span class="hl-string">foo</span><span class="hl-quotes">'</span><span class="hl-code">,
  </span><span class="hl-identifier">lastName</span><span class="hl-code"> : </span><span class="hl-quotes">'</span><span class="hl-string">bar</span><span class="hl-quotes">'</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-brackets">)</span><span class="hl-code">;
 
 
</span><span class="hl-comment">//</span><span class="hl-comment"> Create a user from the model.</span><span class="hl-comment"></span><span class="hl-code">
</span><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">user</span><span class="hl-code"> = </span><span class="hl-identifier">User</span><span class="hl-code">.</span><span class="hl-identifier">createFromUserModel</span><span class="hl-brackets">(</span><span class="hl-identifier">data</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-identifier">user</span><span class="hl-code">.</span><span class="hl-identifier">fullName</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				正如你的意料之中，model definition 会移除掉，属性
				<var> firstName </var>
				和
				<var> lastName </var>
				也会重命名。
			</p>
			<div class="hl-main">
				<pre><span class="hl-reserved">var</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-brackets">{</span><span class="hl-identifier">a</span><span class="hl-code">:</span><span class="hl-quotes">"</span><span class="hl-string">foo</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-identifier">c</span><span class="hl-code">:</span><span class="hl-quotes">"</span><span class="hl-string">bar</span><span class="hl-quotes">"</span><span class="hl-brackets">}</span><span class="hl-code">;
</span><span class="hl-builtin">document</span><span class="hl-code">.</span><span class="hl-identifier">write</span><span class="hl-brackets">(</span><span class="hl-brackets">(</span><span class="hl-reserved">new</span><span class="hl-code"> </span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-identifier">b</span><span class="hl-code">, </span><span class="hl-identifier">c</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-reserved">this</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-code"> = </span><span class="hl-identifier">b</span><span class="hl-code"> + </span><span class="hl-quotes">"</span><span class="hl-string"> </span><span class="hl-quotes">"</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-brackets">(</span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">a</span><span class="hl-code">.</span><span class="hl-identifier">c</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre>
			</div>
			<p>
				在上面的示例中，纯对象转换为未知的引用类型，可以给该对象更详细的指定。
			</p>
			<p>
				在 <a target="_blank" href="http://api.jquery.com/jQuery.isPlainObject/#comment-31062800">jQuery 1.4</a> 中添加了新的 API <a target="_blank" href="http://api.jquery.com/jQuery.isPlainObject/#comment-31062800">isPlainObject</a> 它是在运行时进行类型检查，而我将会不推荐，如果你有编译器在手的话，其实<a target="_blank" href="http://forum.jquery.com/topic/improvement-to-isplainobject">在 JS 中看来似乎是解决一大难题</a>。
			</p>
			<h3>还有...</h3>
			<p>
				还有很多其他使用的东西，比如对常量使用
				<var> @const </var>
				。
			</p>
			<p>
				在此本人推荐 <a target="_blank" href="http://code.google.com/closure/">Closure 工具官网</a>去学习更多的知识。
			</p>
			<p>
				另外，有一本不错的书《<a target="_blank" href="http://books.google.com/books?id=p7uyWPcVGZsC&amp;printsec=frontcover&amp;dq=closure+definitive+guide&amp;hl=en&amp;ei=8Or3TPK_PJP0swOU3qDfAQ&amp;sa=X&amp;oi=book_result&amp;ct=result&amp;resnum=1&amp;ved=0CCYQ6AEwAA#v=onepage&amp;q&amp;f=false">Closure 权威指南</a>》(打个广告)有所有 closure 工具的详细内容。
			</p>
			<h3>总结</h3>
			<p>
				本人已经使用 Google Closure Compiler 有两年多了，它完全改变了 JavaScript 开发方式。
			</p>
			<p>
				总之，在此有以下的东西要分享：
			</p>
			<ol>
				<li>
					<p>
						想要坚持不错的、统一的代码、风格(比如缩进)、80或120字符宽度限制等等，请参考 <a target="_blank" href="http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml">Google JavaScript Style Guide</a>(<a target="_blank" href="http://kissyteam.github.com/docs/html/styleguide/google/javascriptguide.xml">中文</a>)。
					</p>
					<p>
						请确保代码的可读性和可维护性。
					</p>
				</li>
				<li>
					编写兼具描述性与信息性的文档，有些时候需要<a target="_blank" href="http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/events/pastehandler.js?r=156">编写更多的 JsDoc</a>。
				</li>
				<li>
					把时间和精力更多的放在不错的 OO 设计、算法、数据结构上，而不是浪费在细微的优化代码或是使用任何的忍者技，那样会不易读或搞昏。
				</li>
				<li>
					编写代码快速而频繁，并且生成代码。
				</li>
				<li>
					使用大型 JavaScript 库没有错误，只要你可以用编译器来生成代码。其实能够得到更少的代码。
				</li>
				<li>
					<p>
						在 Closure Compiler 的 ADVANCED_OPTIMIZATIONS 模式中确保代码的兼容。
					</p>
					<p>
						确保很多质量更高的代码，会使生成整合其他现有的编译器兼容的 JS 代码更加容易。
					</p>
				</li>
			</ol>
			<p>
				(完)
			</p>
		</div>
	</body>
</html>