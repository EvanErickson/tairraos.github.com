var table=[],$process=document.getElementById("app"),per=10,curIndex=1;table.push("<table id='list'>");table.push("<tr><td>微贷待还散标数据</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>");table.push("<tr><td>By 小乐</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>");table.push("<tr><td>时间戳："+ +new Date()+"</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>");table.push(["<tr><td>项目名称</td>","<td>日期</td>","<td>预期总收(元)</td>","<td>本金(元)</td>","<td>预期利息(元)</td>","<td>偿还期数</td>","<td>页数</td>","</tr>"].join(""));function getData(a){fetch("https://frontpc.weidai.com.cn/api/user/investor/returnMoney/getUserReceiveList?_api=returnMoney.getUserReceiveList&_mock=false&_stamp="+ +new Date(),{"credentials":"include","headers":{"accept":"application/json, text/json","accept-language":"zh-CN,zh;q=0.9,en;q=0.8,und;q=0.7,zh-TW;q=0.6","cache-control":"no-cache","content-type":"application/x-www-form-urlencoded","pragma":"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-site"},"referrer":"https://www.weidai.com.cn/home/myAccount/receivablesDetail.html","referrerPolicy":"no-referrer-when-downgrade","body":"goodsType=BIDDING&holdStatus=0&startTime=&endTime=&rows="+per+"&page="+a,"method":"POST","mode":"cors"}).then(function(b){return b.text()}).then(function(c){var b=JSON.parse(c);return{available:b.data.available,count:b.data.count,data:b.data.data,index:b.data.pageIndex}}).then(function(b){if(b.available===true){$process.innerHTML=Math.floor(b.index*per/b.count*100)+"%";b.data.forEach(function(c){return pushLine(c)});if(b.index<b.count/per){curIndex=b.index+1;getData(b.index+1)}else{resolveFetch()}}else{getData(curIndex)}}).catch(function(){window.setTimeout(function(){getData(curIndex)},500)})}function resolveFetch(){table.push("</table>");document.write(table.join("\n"))}function pushLine(a){table.push(["<tr>","<td>"+a.goodsName+"</td>","<td>D"+a.recoverTime+"</td>","<td>"+a.recoverTotalAmount+"</td>","<td>"+a.recoverPrincipal+"</td>","<td>"+a.recoverInterest+"</td>","<td>第"+a.period+"期</td>","<td>第"+a.period+"页</td>","</tr>"].join(""))}getData(curIndex);